<div class="row">
  <% if (can? :create, Email) && (@employee.status != "Terminated") %>
    <div class="float-right small-12 medium-6 large-6 columns">
      <div class="callout secondary">
        <div id="email-info"><p>Send Email<span data-tooltip aria-haspopup="true" class="has-tip float-right" data-disable-hover="false" tabindex="1" title="Use this form to immediately resend an email about this employee to their manager.">?</span></p>
        </div>
        <%= render'emails/form', employee: @employee %>
      </div>
    </div>
  <% end %>

  <div>
    <ul class="tabs" role="tablist" data-active-collapse="true" data-tabs id="employee-info">
      <li class="tabs-title is-active" role="presentation">
        <a href="#basic-info" role="tab" aria-controls="basic-info" id="basic-info-label">Basic Info</a>
      </li>
      <li class="tabs-title" role="presentation">
        <a href="#contact-info" role="tab" aria-controls="contact-info" id="contact-info-label">Contact and Username Info</a>
      </li>
      <li class="tabs-title" role="presentation">
        <a href="#important-dates" role="tab" aria-controls="important-dates" id="important-dates-label">Important Dates</a>
      </li>
      <li class="tabs-title" role="presentation">
        <a href="#security-profiles" role="tab" aria-controls="security-profiles" id="security-profiles-label">Security Profiles</a>
      </li>
    </ul>
  </div>
  <div class="tabs-content" data-tabs-content="employee-info">
    <div class="tabs-panel is-active" id="basic-info">
      <p>
        <strong>First Name:</strong>
        <%= @employee.first_name %>
      </p>

      <p>
        <strong>Last Name:</strong>
        <%= @employee.last_name %>
      </p>

      <p>
        <strong>Business Title:</strong>
        <%= @employee.job_title.try(:name) %>
      </p>

      <p>
        <strong>Department:</strong>
        <%= @employee.department.name %>
      </p>

      <p>
        <strong>Location:</strong>
        <%= @employee.location.try(:name) %>
      </p>

      <p>
        <strong>Manager:</strong>
        <%= @employee.manager.try(:cn) %>
      </p>

      <p>
        <strong>Worker Type:</strong>
        <%= @employee.worker_type.try(:name) %>
      </p>

      <p>
        <strong>Status:</strong>
        <%= @employee.status %>
      </p>

      <p>
        <strong>Employee ID:</strong>
        <%= @employee.employee_id %>
      </p>

      <!-- Start admin info section -->
      <% if can? :manage, Employee %>
        <p>
          <strong>ADP Assoc. OID:</strong>
          <%= @employee.adp_assoc_oid %>
        </p>

        <p>
          <strong>Record Created at:</strong>
          <%= @employee.created_at %>
        </p>

        <p>
          <strong>Record Updated at:</strong>
          <%= @employee.updated_at %>
        </p>

        <p>
          <strong>Active Directory Updated at:</strong>
          <%= @employee.ad_updated_at %>
        </p>
      <% end %>
      <!-- End admin info section -->

    </div>
    <div class="tabs-panel" id="contact-info">
      <p>
        <strong>Email:</strong>
        <%= @employee.email %>
      </p>

      <p>
        <strong>sAMAccountName:</strong>
        <%= @employee.sam_account_name %>
      </p>

      <p>
        <strong>Office Phone:</strong>
        <%= @employee.office_phone %>
      </p>

      <p>
        <strong>Home Address 1:</strong>
        <%= @employee.home_address_1 %>
      </p>

      <p>
        <strong>Home Address 2:</strong>
        <%= @employee.home_address_2 %>
      </p>

      <p>
        <strong>Home City:</strong>
        <%= @employee.home_city %>
      </p>

      <p>
        <strong>Home State:</strong>
        <%= @employee.home_state %>
      </p>

      <p>
        <strong>Home Zip:</strong>
        <%= @employee.home_zip %>
      </p>
    </div>
    <div class="tabs-panel" id="important-dates">
      <p>
        <strong>Hire Date:</strong>
        <%= @employee.hire_date %>
      </p>
      <p>
        <strong>Leave Start Date:</strong>
        <%= @employee.leave_start_date %>
      </p>

      <p>
        <strong>Leave Return Date:</strong>
        <%= @employee.leave_return_date %>
      </p>

      <p>
        <strong>Contract End Date:</strong>
        <%= @employee.contract_end_date %>
      </p>

      <p>
        <strong>Termination Date:</strong>
        <%= @employee.termination_date %>
      </p>
    </div>
    <div class="tabs-panel" id="security-profiles">
      <h3 class="subheader text-left">Active Security Profiles</h3>
      <div class="indent-1">
        <% @employee.active_security_profiles.each do |sp| %>
          <div>
            <%= sp.name %><br>
            <ul>
              <% sp.access_levels.find_each do |al| %>
                <li class="indent-1"><small><%= al.name %> <%= al.application.name %></small></li>
              <% end %>
            </ul>
          </div>
        <% end %>
      </div>
      <%= link_to "Update Security Profile",
            { controller: "emp_transactions",
            action: "new",
            kind: "Security Access",
            employee_id: @employee.id,
            user_id: current_user.id,
            reason: "manager" },
            class: "button expanded" %>
    </div>
  </div>

</div>

<div class="row">
  <div class="columns small-12 medium-12 large-12">
    <%= link_to 'Back', employees_path %>
  </div>
</div>
